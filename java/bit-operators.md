# 位操作符

## 运算符

|符号|描述|运算规则|
|-|-|-|
|&|与|两位均为1时，结果为1|
|\||或|两位均为0时，结果为0|
|^|异或|两位相同为0，相异为1|
|~|取反|1变0，0变1|
|<<|左移|左移若干位，高位丢弃，地位补零|
|>>|右移|有意若干位，高位补0，|

- 在这6种操作符，只有 ~ 取反是单目操作符，其它5种都是双目操作符。
- 位操作只能用于整形数据，对 float 和 double 类型进行位操作会被编译器报错。
- 位操作符的运算优先级比较低，因为尽量使用括号来确保运算顺序，否则很可能会得到莫明其妙的结果。比如要得到像 1，3，5，9 这些 2^i+1 的数字。写成 int a = 1 << i + 1; 是不对的，程序会先执行 i + 1，再执行左移操作。应该写成 int a = (1 << i) + 1;
- 另外位操作还有一些复合操作符，如 &=、|=、 ^=、<<=、>>=

## 常用小技巧

### 判断奇偶

判断末位，0为偶数，1为奇数。

```if((a & 1) == 0) 判断偶数```

### 交换两数

int a = 1, b = 2;
a ^= b;
b ^= a;
a ^= b;

### 变换符号

取反加1

`~a + 1`

### 绝对值

对于 `int i = a >> 31` 如果 a 为正数，i等于0，为负数，i等于-1，如果 i 等于0，直接返回，否则 返回 `~a + 1`

int j = a >> 31;
(a ^ j) - j
